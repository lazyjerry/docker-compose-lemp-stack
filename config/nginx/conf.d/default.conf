server {
   
    
    server_name localhost;
    
    error_log  /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;

     index index.php index.html;
    
    # 對應 ./app 資料夾
    root /var/www/html;

    # 設定檔
    # include /etc/nginx/conf.d/custom/block_sql_injections.subconf;
    # include /etc/nginx/conf.d/custom/block_common_exploits.subconf;
    include /etc/nginx/conf.d/custom/deny_files.subconf;
    include /etc/nginx/conf.d/custom/block_bot.subconf;
    # include /etc/nginx/conf.d/custom/server_fastcgi_cache.subconf;


    # router
    include /etc/nginx/conf.d/template/codeigniter.subconf;
    # include /etc/nginx/conf.d/template/wordpress.subconf;
   

    location ~ \.php$ {
        try_files $uri /index.php =404;
        fastcgi_pass php:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }

    # Static files
    location ~* ^.+\.(jpg|jpeg|gif|css|png|js|ico|html|txt)$ {
        access_log        off;
        expires           30d;
    }
}
